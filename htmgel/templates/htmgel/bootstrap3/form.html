{% load i18n %}

<form class="form-{{ form_class|default:"horizontal" }}" action="{{ action }}" method="{{ method|default:"post" }}"{% if multipart %} enctype="multipart/form-data"{% endif %}>

    {% if form.non_field_errors %}
        {% for error in form.non_field_errors %}
            {% with message=error is_dismissible=True %}
                {% include "htmgel/bootstrap3/alert.html" %}
            {% endwith %}
        {% endfor %}
    {% elif form.errors %}
        {% trans "Error" as label_x %}
        {% trans "Please correct the problems below." as mesage_x %}
        {% include "htmgel/alert.html" with enable_close=True label=label_x message=message_x %}
    {% else %}
    {% endif %}

    {% csrf_token %}

    {% if form.has_fieldsets %}
        {% for fieldset in form.fieldsets %}
            <fieldset>
                <legend>{{ fieldset.legend }}</legend>
                {% if fieldset.description %}
                    <p>{{ fieldset.description }}</p>
                {% endif %}
                {% for field in fieldset.fields %}
                    {% include "htmgel/bootstrap3/form_field.html"%}
                {% endfor %}
            </fieldset>
        {% endfor %}
    {% else %}
        {% for field in form %}
            {% include "htmgel/bootstrap3/form_field.html" %}
        {% endfor %}
    {% endif %}

    {% if formsets %}
        {% for formset in formsets %}
            {% include "inline_formset.html" with formset=formset %}
        {% endfor %}
    {% endif %}

    <div class="form-group">
        <p>
            <button type="submit" class="btn btn-primary">{% trans "Submit" %}</button>
            {% if cancel_url %}
                &nbsp; <a href="{{ cancel_url }}">{% trans "Cancel" %}</a>
            {% endif %}
        </p>
    </div>

</form>